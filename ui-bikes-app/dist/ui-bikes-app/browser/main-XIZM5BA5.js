import{$ as Ee,B as A,C as v,D as d,E as Ce,F as _e,G as ye,H as ce,I as p,J as U,K as S,L as b,M as w,N as x,P as le,Q as W,R as M,S as be,T as R,U as we,V as xe,W as Se,X as Ie,Y as Me,Z as Re,_ as X,a as de,aa as E,b as g,ba as Pe,c as I,ca as pe,d as me,da as ke,e as B,ea as Te,f as ue,fa as P,g as se,ga as Y,h as fe,i as C,ia as F,j as H,ja as L,k as ge,ka as N,l as _,la as j,m as y,ma as V,n as ae,na as O,p as l,pa as Ae,q as u,qa as Fe,r as h,s as he,t as m,u as ve,w as s,x as a,y as J}from"./chunk-U6I557YQ.js";function $(n,c,t,e){let i=new P(c,$.PATH,"get");return t&&i.query("code",t.code,{}),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}$.PATH="/auth/activate-account";function ee(n,c,t,e){let i=new P(c,ee.PATH,"post");return t&&i.body(t.body,"application/json"),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}ee.PATH="/auth/authenticate";function te(n,c,t,e){let i=new P(c,te.PATH,"get");return t&&i.query("email",t.email,{}),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}te.PATH="/auth/demand-recover";function ie(n,c,t,e){let i=new P(c,ie.PATH,"post");return t&&i.body(t.body,"application/json"),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}ie.PATH="/auth/register";function ne(n,c,t,e){let i=new P(c,ne.PATH,"patch");return t&&(i.query("recoveryCode",t.recoveryCode,{}),i.body(t.body,"application/json")),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}ne.PATH="/auth/set-new-password";function oe(n,c,t,e){let i=new P(c,oe.PATH,"patch");return t&&i.query("recoveryCode",t.recoveryCode,{}),n.request(i.build({responseType:"json",accept:"application/json",context:e})).pipe(I(o=>o instanceof R),g(o=>o))}oe.PATH="/auth/set-recover-code";var k=(()=>{class n extends Te{constructor(t,e){super(t,e)}static RegisterUserPath="/auth/register";registerUser$Response(t,e){return ie(this.http,this.rootUrl,t,e)}registerUser(t,e){return this.registerUser$Response(t,e).pipe(g(i=>i.body))}static AuthenticatePath="/auth/authenticate";authenticate$Response(t,e){return ee(this.http,this.rootUrl,t,e)}authenticate(t,e){return this.authenticate$Response(t,e).pipe(g(i=>i.body))}static SpecifyRecoverCodePath="/auth/set-recover-code";specifyRecoverCode$Response(t,e){return oe(this.http,this.rootUrl,t,e)}specifyRecoverCode(t,e){return this.specifyRecoverCode$Response(t,e).pipe(g(i=>i.body))}static SetNewPasswordPath="/auth/set-new-password";setNewPassword$Response(t,e){return ne(this.http,this.rootUrl,t,e)}setNewPassword(t,e){return this.setNewPassword$Response(t,e).pipe(g(i=>i.body))}static RecoverPassPath="/auth/demand-recover";recoverPass$Response(t,e){return te(this.http,this.rootUrl,t,e)}recoverPass(t,e){return this.recoverPass$Response(t,e).pipe(g(i=>i.body))}static ActivateAccountPath="/auth/activate-account";activateAccount$Response(t,e){return $(this.http,this.rootUrl,t,e)}activateAccount(t,e){return this.activateAccount$Response(t,e).pipe(g(i=>i.body))}static \u0275fac=function(e){return new(e||n)(se(ke),se(we))};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qe(n,c){if(n&1&&(s(0,"p",14),p(1),a()),n&2){let t=c.$implicit;l(),S(" ",t," ")}}function Ze(n,c){if(n&1&&(s(0,"p",14),p(1),a()),n&2){let t=d(2);l(),S(" ",t.errorMessage," ")}}function Je(n,c){if(n&1&&(s(0,"div",11),h(1,Qe,2,1,"p",12)(2,Ze,2,1,"p",13),a()),n&2){let t=d();l(),m("ngForOf",t.validationErrors),l(),m("ngIf",t.errorMessage)}}var Le=(()=>{class n{authService;tokenService;router;authRequest={email:"",password:""};errorMessage="";validationErrors=[];constructor(t,e,i){this.authService=t,this.tokenService=e,this.router=i}authenticate(){this.validationErrors=[],this.errorMessage="",this.authService.authenticate({body:this.authRequest}).subscribe({next:t=>{this.tokenService.token=t.accessToken,this.router.navigate(["bikes"])},error:t=>{t.status===400?this.validationErrors=t.error.errors:this.errorMessage=t.error.message}})}static \u0275fac=function(e){return new(e||n)(u(k),u(Y),u(E))};static \u0275cmp=C({type:n,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"form-container","border","border-1","p-4","rounded-2"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","name","login-email",1,"form-control",3,"ngModelChange","ngModel"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","name","login-password",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-between","mt-3"],["href","javascript:void[0]","routerLink","/register",1,"btn","btn-link"],["href","javascript:void[0]","routerLink","/recover-pass-mail",1,"btn","btn-link"],["role","alert",1,"alert","alert-danger"],["class","p-0 m-0",4,"ngFor","ngForOf"],["class","p-0 m-0",4,"ngIf"],[1,"p-0","m-0"]],template:function(e,i){e&1&&(s(0,"form",0),h(1,Je,3,2,"div",1),s(2,"div",2)(3,"label",3),p(4,"Email address"),a(),s(5,"input",4),x("ngModelChange",function(r){return w(i.authRequest.email,r)||(i.authRequest.email=r),r}),a()(),s(6,"div",2)(7,"label",5),p(8,"Password"),a(),s(9,"input",6),x("ngModelChange",function(r){return w(i.authRequest.password,r)||(i.authRequest.password=r),r}),a()(),s(10,"button",7),v("click",function(){return i.authenticate()}),p(11,"Login "),a(),s(12,"div",8)(13,"button",9),p(14," Don't have an account yet register "),a(),s(15,"button",10),p(16," I forgot my password "),a()()()),e&2&&(l(),m("ngIf",i.errorMessage||i.validationErrors.length),l(4),b("ngModel",i.authRequest.email),l(4),b("ngModel",i.authRequest.password))},dependencies:[W,M,Pe,O,F,L,N,V,j]})}return n})();function Xe(n,c){if(n&1&&(s(0,"p",17),p(1),a()),n&2){let t=c.$implicit;l(),S(" ",t," ")}}function Ye(n,c){if(n&1&&(s(0,"p",17),p(1),a()),n&2){let t=d(2);l(),S(" ",t.errorMessage," ")}}function $e(n,c){if(n&1&&(s(0,"div",14),h(1,Xe,2,1,"p",15)(2,Ye,2,1,"p",16),a()),n&2){let t=d();l(),m("ngForOf",t.validationErrors),l(),m("ngIf",t.errorMessage)}}var Ne=(()=>{class n{authService;router;registerRequest={email:"",password:"",firstname:"",lastname:""};errorMessage="";validationErrors=[];constructor(t,e){this.authService=t,this.router=e}register(){this.authService.registerUser({body:this.registerRequest}).subscribe({next:t=>{this.router.navigateByUrl("/activate-account")},error:t=>{t.status==400?this.validationErrors=t.error.errors:this.errorMessage=t.error.message}})}moveToLogin(){this.router.navigate(["login"])}static \u0275fac=function(e){return new(e||n)(u(k),u(E))};static \u0275cmp=C({type:n,selectors:[["app-register"]],decls:23,vars:5,consts:[[1,"form-container","border","border-1","p-4","rounded-2"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mb-3"],["for","firstname",1,"form-label"],["type","text","id","firstname","name","register-fn",1,"form-control",3,"ngModelChange","ngModel"],["for","lastname",1,"form-label"],["type","text","id","lastname","name","register-ln",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","aria-describedby","emailHelp","name","register-email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","login-password",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-between","mt-3"],["href","javascript:void[0]",1,"btn","btn-link",3,"click"],["role","alert",1,"alert","alert-danger"],["class","p-0 m-0",4,"ngFor","ngForOf"],["class","p-0 m-0",4,"ngIf"],[1,"p-0","m-0"]],template:function(e,i){e&1&&(s(0,"form",0),h(1,$e,3,2,"div",1),s(2,"div",2)(3,"label",3),p(4,"Firstname"),a(),s(5,"input",4),x("ngModelChange",function(r){return w(i.registerRequest.firstname,r)||(i.registerRequest.firstname=r),r}),a()(),s(6,"div",2)(7,"label",5),p(8,"Lastname"),a(),s(9,"input",6),x("ngModelChange",function(r){return w(i.registerRequest.lastname,r)||(i.registerRequest.lastname=r),r}),a()(),s(10,"div",2)(11,"label",7),p(12,"Email address"),a(),s(13,"input",8),x("ngModelChange",function(r){return w(i.registerRequest.email,r)||(i.registerRequest.email=r),r}),a()(),s(14,"div",2)(15,"label",9),p(16,"Password"),a(),s(17,"input",10),x("ngModelChange",function(r){return w(i.registerRequest.password,r)||(i.registerRequest.password=r),r}),a()(),s(18,"button",11),v("click",function(){return i.register()}),p(19,"Submit "),a(),s(20,"div",12)(21,"button",13),v("click",function(){return i.moveToLogin()}),p(22," I already have an account "),a()()()),e&2&&(l(),m("ngIf",i.validationErrors.length||i.errorMessage),l(4),b("ngModel",i.registerRequest.firstname),l(4),b("ngModel",i.registerRequest.lastname),l(4),b("ngModel",i.registerRequest.email),l(4),b("ngModel",i.registerRequest.password))},dependencies:[W,M,O,F,L,N,V,j]})}return n})();var et=["input"];function tt(n,c){if(n&1){let t=A();s(0,"span")(1,"input",2,0),v("click",function(i){_(t);let o=d();return y(o.onClick(i))})("paste",function(i){let o=_(t).index,r=d();return y(r.onPaste(i,o))})("input",function(i){let o=_(t).index,r=d();return y(r.onInput(i,o))})("keydown",function(i){let o=_(t).index,r=d();return y(r.onKeydown(i,o))}),a()()}if(n&2){let t=d();ve("code-hidden",t.isCodeHidden),l(),m("type",t.inputType)("disabled",t.disabled),he("inputmode",t.inputMode)("autocapitalize",t.autocapitalize)}}var Ve=new ue("CodeInputComponentConfig"),je={codeLength:4,inputType:"tel",inputMode:"numeric",initialFocusField:void 0,isCharsCode:!1,isCodeHidden:!1,isPrevFocusableAfterClearing:!0,isFocusingOnLastByClickIfFilled:!1,code:void 0,disabled:!1,autocapitalize:void 0},Q=function(n){return n[n.ready=0]="ready",n[n.reset=1]="reset",n}(Q||{}),Oe=(()=>{let c=class c{constructor(e){if(this.isNonDigitsCode=!1,this.codeChanged=new ae,this.codeCompleted=new ae,this.placeholders=[],this.inputs=[],this.inputsStates=[],this.state={isFocusingAfterAppearingCompleted:!1,isInitialFocusFieldEnabled:!1},Object.assign(this,je),!!e)for(let i in e)e.hasOwnProperty(i)&&je.hasOwnProperty(i)&&(this[i]=e[i])}ngOnInit(){this.state.isInitialFocusFieldEnabled=!this.isEmpty(this.initialFocusField),this.onCodeLengthChanges()}ngAfterViewInit(){this.inputsListSubscription=this.inputsList.changes.subscribe(this.onInputsListChanges.bind(this)),this.onInputsListChanges(this.inputsList)}ngAfterViewChecked(){this.focusOnInputAfterAppearing()}ngOnChanges(e){e.code&&this.onInputCodeChanges(),e.codeLength&&this.onCodeLengthChanges()}ngOnDestroy(){this.inputsListSubscription&&this.inputsListSubscription.unsubscribe()}reset(e=!1){this.onInputCodeChanges(),this.state.isInitialFocusFieldEnabled&&this.focusOnField(this.initialFocusField),e&&this.emitChanges()}focusOnField(e){if(e>=this._codeLength)throw new Error("The index of the focusing input box should be less than the codeLength.");this.inputs[e].focus()}onClick(e){if(!this.isFocusingOnLastByClickIfFilled)return;let i=e.target,o=this.inputs[this._codeLength-1];i===o||!(this.getCurrentFilledCode().length>=this._codeLength)||setTimeout(()=>o.focus())}onInput(e,i){let o=e.target,r=e.data||o.value;if(this.isEmpty(r))return;if(!this.canInputValue(r)){e.preventDefault(),e.stopPropagation(),this.setInputValue(o,null),this.setStateForInput(o,Q.reset);return}let f=r.toString().trim().split("");for(let T=0;T<f.length;T++){let Z=T+i;if(Z>this._codeLength-1)break;this.setInputValue(this.inputs[Z],f[T])}this.emitChanges();let D=i+f.length;if(D>this._codeLength-1){o.blur();return}this.inputs[D].focus()}onPaste(e,i){e.preventDefault(),e.stopPropagation();let o=e.clipboardData?e.clipboardData.getData("text").trim():void 0;if(this.isEmpty(o))return;let r=o.split(""),f=0;for(let D=i;D<this.inputs.length&&f!==r.length;D++){let T=this.inputs[D],Z=r[f];if(!this.canInputValue(Z)){this.setInputValue(T,null),this.setStateForInput(T,Q.reset);return}this.setInputValue(T,Z.toString()),f++}this.inputs[i].blur(),this.emitChanges()}onKeydown(e,i){return de(this,null,function*(){let o=e.target,r=this.isEmpty(o.value),f=i-1,D=yield this.isBackspaceKey(e),T=this.isDeleteKey(e);!D&&!T||(e.preventDefault(),this.setInputValue(o,null),r||this.emitChanges(),!(f<0||T)&&(r||this.isPrevFocusableAfterClearing)&&this.inputs[f].focus())})}onInputCodeChanges(){if(!this.inputs.length)return;if(this.isEmpty(this.code)){this.inputs.forEach(o=>{this.setInputValue(o,null)});return}let e=this.code.toString().trim().split(""),i=!0;for(let o of e)if(!this.canInputValue(o)){i=!1;break}this.inputs.forEach((o,r)=>{let f=i?e[r]:null;this.setInputValue(o,f)})}onCodeLengthChanges(){if(this.codeLength)if(this._codeLength=this.codeLength,this._codeLength>this.placeholders.length){let e=Array(this._codeLength-this.placeholders.length).fill(1);this.placeholders.splice(this.placeholders.length-1,0,...e)}else this._codeLength<this.placeholders.length&&this.placeholders.splice(this._codeLength)}onInputsListChanges(e){if(e.length>this.inputs.length){let i=e.filter((r,f)=>f>this.inputs.length-1);this.inputs.splice(this.inputs.length,0,...i.map(r=>r.nativeElement));let o=Array(i.length).fill(Q.ready);this.inputsStates.splice(this.inputsStates.length,0,...o)}else e.length<this.inputs.length&&(this.inputs.splice(e.length),this.inputsStates.splice(e.length));this.onInputCodeChanges()}focusOnInputAfterAppearing(){this.state.isInitialFocusFieldEnabled&&(this.state.isFocusingAfterAppearingCompleted||(this.focusOnField(this.initialFocusField),this.state.isFocusingAfterAppearingCompleted=document.activeElement===this.inputs[this.initialFocusField]))}emitChanges(){setTimeout(()=>this.emitCode(),50)}emitCode(){let e=this.getCurrentFilledCode();this.codeChanged.emit(e),e.length>=this._codeLength&&this.codeCompleted.emit(e)}getCurrentFilledCode(){let e="";for(let i of this.inputs)this.isEmpty(i.value)||(e+=i.value);return e}isBackspaceKey(e){return e.key&&e.key.toLowerCase()==="backspace"||e.keyCode&&e.keyCode===8?Promise.resolve(!0):!e.keyCode||e.keyCode!==229?Promise.resolve(!1):new Promise(o=>{setTimeout(()=>{let r=e.target,f=this.getStateForInput(r)===Q.reset;f&&this.setStateForInput(r,Q.ready),o(r.selectionStart===0&&!f)})})}isDeleteKey(e){return e.key&&e.key.toLowerCase()==="delete"||e.keyCode&&e.keyCode===46}setInputValue(e,i){let o=this.isEmpty(i),r="has-value",f="empty";o?(e.value="",e.classList.remove(r),e.parentElement.classList.add(f)):(e.value=i,e.classList.add(r),e.parentElement.classList.remove(f))}canInputValue(e){return this.isEmpty(e)?!1:/^[0-9]+$/.test(e.toString())||this.isCharsCode||this.isNonDigitsCode}setStateForInput(e,i){let o=this.inputs.indexOf(e);o<0||(this.inputsStates[o]=i)}getStateForInput(e){let i=this.inputs.indexOf(e);return this.inputsStates[i]}isEmpty(e){return e==null||!e.toString().length}};c.\u0275fac=function(i){return new(i||c)(u(Ve,8))},c.\u0275cmp=C({type:c,selectors:[["code-input"]],viewQuery:function(i,o){if(i&1&&Ce(et,5),i&2){let r;_e(r=ye())&&(o.inputsList=r)}},inputs:{codeLength:"codeLength",inputType:"inputType",inputMode:"inputMode",initialFocusField:"initialFocusField",isNonDigitsCode:"isNonDigitsCode",isCharsCode:"isCharsCode",isCodeHidden:"isCodeHidden",isPrevFocusableAfterClearing:"isPrevFocusableAfterClearing",isFocusingOnLastByClickIfFilled:"isFocusingOnLastByClickIfFilled",code:"code",disabled:"disabled",autocapitalize:"autocapitalize"},outputs:{codeChanged:"codeChanged",codeCompleted:"codeCompleted"},features:[ge],decls:1,vars:1,consts:[["input",""],[3,"code-hidden",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"click","paste","input","keydown","type","disabled"]],template:function(i,o){i&1&&h(0,tt,3,6,"span",1),i&2&&m("ngForOf",o.placeholders)},dependencies:[W],styles:["[_nghost-%COMP%]{--text-security-type: disc;--item-spacing: 4px;--item-height: 4.375em;--item-border: 1px solid #dddddd;--item-border-bottom: 1px solid #dddddd;--item-border-has-value: 1px solid #dddddd;--item-border-bottom-has-value: 1px solid #dddddd;--item-border-focused: 1px solid #dddddd;--item-border-bottom-focused: 1px solid #dddddd;--item-shadow-focused: 0px 1px 5px rgba(221, 221, 221, 1);--item-border-radius: 5px;--item-background: transparent;--item-font-weight: 300;--color: #171516;display:flex;transform:translateZ(0);font-size:inherit;color:var(--color)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{display:block;flex:1;padding-right:var(--item-spacing)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-left:var(--item-spacing)}[_nghost-%COMP%]   span.code-hidden[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-security:var(--text-security-type);-webkit-text-security:var(--text-security-type);-moz-text-security:var(--text-security-type)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:var(--item-height);color:inherit;background:var(--item-background);text-align:center;font-size:inherit;font-weight:var(--item-font-weight);border:var(--item-border);border-bottom:var(--item-border-bottom);border-radius:var(--item-border-radius);-webkit-appearance:none;transform:translateZ(0);-webkit-transform:translate3d(0,0,0);outline:none}[_nghost-%COMP%]   input.has-value[_ngcontent-%COMP%]{border:var(--item-border-has-value);border-bottom:var(--item-border-bottom-has-value)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:var(--item-border-focused);border-bottom:var(--item-border-bottom-focused);box-shadow:var(--item-shadow-focused)}"]});let n=c;return n})(),qe=(()=>{let c=class c{static forRoot(e){return{ngModule:c,providers:[{provide:Ve,useValue:e}]}}};c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=H({type:c}),c.\u0275inj=B({imports:[be]});let n=c;return n})();function nt(n,c){if(n&1){let t=A();s(0,"div",5)(1,"h4",6),p(2),a(),s(3,"div",7)(4,"button",8),v("click",function(){_(t);let i=d(2);return y(i.moveToLogin())}),p(5,"Login"),a()()()}if(n&2){let t=d(2);l(2),S(" ",t.message," ")}}function ot(n,c){if(n&1){let t=A();s(0,"h4",6),p(1),a(),s(2,"button",9),v("click",function(){_(t);let i=d(2);return y(i.submitted=!1)}),p(3," Try again "),a()}if(n&2){let t=d(2);l(),U(t.message)}}function rt(n,c){if(n&1&&(s(0,"div",3),h(1,nt,6,1,"div",4)(2,ot,4,1,"ng-template",5,1,le),a()),n&2){let t=ce(3),e=d();l(),m("ngIf",e.isOkay)("ngIfElse",t)}}function st(n,c){if(n&1){let t=A();s(0,"div",5)(1,"h4",10),p(2," An activation code has been sent to your email : "),a(),s(3,"p",11),p(4,"Check your mail.. you will find an email from our support team containing a 10 characters code to activate your account"),a(),s(5,"code-input",12),v("codeCompleted",function(i){_(t);let o=d();return y(o.verifyActivationCode(i))}),a()()}n&2&&(l(5),m("code","number")("codeLength",10)("isCodeHidden",!1))}var De=(()=>{class n{authService;router;constructor(t,e){this.authService=t,this.router=e}submitted=!1;isOkay=!1;message="";verifyActivationCode(t){this.submitted=!0,this.authService.activateAccount({code:t}).subscribe({next:e=>{this.isOkay=!0,this.message="Successfully activated, follow this link to login now : "},error:()=>{this.isOkay=!1,this.message="Something went wrong try again : "}})}moveToLogin(){this.router.navigate(["login"])}static \u0275fac=function(e){return new(e||n)(u(k),u(E))};static \u0275cmp=C({type:n,selectors:[["app-activate-account"]],decls:3,vars:2,consts:[["codeInput",""],["wrong",""],["class","d-flex flex-column gap-3",4,"ngIf","ngIfElse"],[1,"d-flex","flex-column","gap-3"],["style","width: 800px;margin-inline: auto; margin-top: 150px",4,"ngIf","ngIfElse"],[2,"width","800px","margin-inline","auto","margin-top","150px"],[1,"text-center","text-success"],[1,"d-flex","align-items-center","justify-content-center"],[1,"btn","btn-primary","text-center",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"fw-bold","text-primary","text-center"],[1,"text-center","mt-3","mb-3"],[3,"codeCompleted","code","codeLength","isCodeHidden"]],template:function(e,i){if(e&1&&h(0,rt,4,2,"div",2)(1,st,6,3,"ng-template",null,0,le),e&2){let o=ce(2);m("ngIf",i.submitted)("ngIfElse",o)}},dependencies:[M,Oe]})}return n})();function at(n,c){if(n&1&&(s(0,"div",9)(1,"p"),p(2),a()()),n&2){let t=d();l(2),U(t.errorMessage)}}var We=(()=>{class n{router;authService;email="";errorMessage="";constructor(t,e){this.router=t,this.authService=e}sendEmail(){console.log("This is the email"),console.log(this.email),this.authService.recoverPass({email:this.email}).subscribe({next:t=>{this.router.navigate(["setCodeFrom",this.email])},error:t=>{this.errorMessage=t.error.message,console.log(t)}})}static \u0275fac=function(e){return new(e||n)(u(E),u(k))};static \u0275cmp=C({type:n,selectors:[["app-recover-pass-email"]],decls:13,vars:2,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center","m-auto","border","border-1","mt-3","rounded-5",2,"width","500px","height","500px"],[1,"mb-3"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","mb-3"],[1,"text","text-danger"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp","name","recover-email",1,"form-control",3,"ngModelChange","ngModel"],["id","emailHelp",1,"form-text"],["type","submit",1,"btn","btn-primary",3,"click"],["role","alert",1,"alert","alert-danger"]],template:function(e,i){e&1&&(s(0,"form",0)(1,"div",1),h(2,at,3,1,"div",2),s(3,"div",3)(4,"h4",4),p(5,"Recover your forgotten password"),a()(),s(6,"label",5),p(7,"Email address"),a(),s(8,"input",6),x("ngModelChange",function(r){return w(i.email,r)||(i.email=r),r}),a(),s(9,"div",7),p(10,"We'll send an email to recover your password "),a()(),s(11,"button",8),v("click",function(){return i.sendEmail()}),p(12,"send "),a()()),e&2&&(l(2),m("ngIf",i.errorMessage),l(6),b("ngModel",i.email))},dependencies:[M,O,F,L,N,V,j]})}return n})();function ct(n,c){if(n&1){let t=A();s(0,"div",1)(1,"p",2),p(2),a(),s(3,"button",3),v("click",function(){_(t);let i=d();return y(i.submitted=!1)}),p(4," try again "),a()()}if(n&2){let t=d();l(2),S(" ",t.error," ")}}function lt(n,c){n&1&&J(0,"div",10)}function pt(n,c){if(n&1){let t=A();s(0,"form",1)(1,"div",4),h(2,lt,1,0,"div",5),s(3,"h4",6),p(4),a(),s(5,"label",7),p(6,"Write recovery code : "),a(),s(7,"input",8),x("ngModelChange",function(i){_(t);let o=d();return w(o.code,i)||(o.code=i),y(i)}),a()(),s(8,"button",9),v("click",function(){_(t);let i=d();return y(i.verifyCode())}),p(9,"send "),a()()}if(n&2){let t=d();l(2),m("ngIf",!1),l(2),S("we sent an email to ",t.email,""),l(3),b("ngModel",t.code)}}var Be=(()=>{class n{activatedRoute;authService;router;email="";code="";submitted=!1;error="";constructor(t,e,i){this.activatedRoute=t,this.authService=e,this.router=i}ngOnInit(){this.email=this.activatedRoute.snapshot.params.email,console.log(this.email)}verifyCode(){this.submitted=!0,this.authService.specifyRecoverCode({recoveryCode:this.code}).subscribe({next:t=>{this.router.navigate(["setNewPassword"],{queryParams:{code:this.code}})},error:t=>{this.error=t.error.message}})}static \u0275fac=function(e){return new(e||n)(u(X),u(k),u(E))};static \u0275cmp=C({type:n,selectors:[["app-recover-pass-set-code"]],decls:2,vars:2,consts:[["class",`d-flex flex-column
 align-items-center
 justify-content-center
 m-auto border border-1 mt-3
 rounded-5`,"style","width: 500px; height: 500px",4,"ngIf"],[1,"d-flex","flex-column","align-items-center","justify-content-center","m-auto","border","border-1","mt-3","rounded-5",2,"width","500px","height","500px"],[1,"text-center","text-danger"],[1,"btn","btn-warning",3,"click"],[1,"mb-3"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center","text-primary","fs-5"],["for","recovery-code",1,"form-label","fw-bold"],["type","text","id","recovery-code","name","code-recovery",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"click"],["role","alert",1,"alert","alert-danger"]],template:function(e,i){e&1&&h(0,ct,5,1,"div",0)(1,pt,10,3,"form",0),e&2&&(m("ngIf",i.error.length&&i.submitted),l(),m("ngIf",!i.submitted))},dependencies:[M,O,F,L,N,V,j]})}return n})();function dt(n,c){if(n&1&&(s(0,"p",12),p(1),a()),n&2){let t=c.$implicit;l(),S(" ",t," ")}}function mt(n,c){if(n&1&&(s(0,"div",10),h(1,dt,2,1,"p",11),a()),n&2){let t=d();l(),m("ngForOf",t.validationErrors)}}function ut(n,c){if(n&1&&(s(0,"div",13)(1,"p",12),p(2),a()()),n&2){let t=d();l(2),U(t.errorMessage)}}function ft(n,c){if(n&1){let t=A();s(0,"div",14),p(1),s(2,"button",15),v("click",function(){_(t);let i=d();return y(i.moveToLogin())}),p(3," Login now "),a()()}if(n&2){let t=d();l(),S(" ",t.successMessage," you can ")}}var He=(()=>{class n{activatedRoute;router;authService;code="";recoverRequest={password:"",confirmPassword:""};successMessage="";errorMessage="";validationErrors=[];constructor(t,e,i){this.activatedRoute=t,this.router=e,this.authService=i}ngOnInit(){this.code=this.activatedRoute.snapshot.queryParams.code}applyPasswordChange(){this.validationErrors=[],this.errorMessage="",this.authService.setNewPassword({recoveryCode:this.code,body:this.recoverRequest}).subscribe({next:t=>{this.successMessage=t.message},error:t=>{console.log(t),t.status==400?this.validationErrors=t.error.errors:this.errorMessage=t.error.message}})}moveToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(u(X),u(E),u(k))};static \u0275cmp=C({type:n,selectors:[["app-recover-set-new-password"]],decls:14,vars:5,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center","m-auto","border","border-1","mt-3","rounded-5",2,"width","500px","height","500px"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success d-flex align-items-center",4,"ngIf"],[1,"mb-3"],["for","new-pass",1,"form-label","fw-bold"],["type","password","id","new-pass","name","set-new-pass",1,"form-control",3,"ngModelChange","ngModel"],["for","confirm-new-pass",1,"form-label","fw-bold"],["type","password","id","confirm-new-pass","name","set-code-recovery",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"click"],["role","alert",1,"alert","alert-danger"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],[1,"alert","alert-danger"],[1,"alert","alert-success","d-flex","align-items-center"],[1,"btn","btn-link",3,"click"]],template:function(e,i){e&1&&(s(0,"form",0),h(1,mt,2,1,"div",1)(2,ut,3,1,"div",2)(3,ft,4,1,"div",3),s(4,"div",4)(5,"label",5),p(6,"Write a new password : "),a(),s(7,"input",6),x("ngModelChange",function(r){return w(i.recoverRequest.password,r)||(i.recoverRequest.password=r),r}),a()(),s(8,"div",4)(9,"label",7),p(10,"Confirm the new password : "),a(),s(11,"input",8),x("ngModelChange",function(r){return w(i.recoverRequest.confirmPassword,r)||(i.recoverRequest.confirmPassword=r),r}),a()(),s(12,"button",9),v("click",function(){return i.applyPasswordChange()}),p(13," validate "),a()()),e&2&&(l(),m("ngIf",i.validationErrors.length),l(),m("ngIf",i.errorMessage),l(),m("ngIf",i.successMessage),l(4),b("ngModel",i.recoverRequest.password),l(4),b("ngModel",i.recoverRequest.confirmPassword))},dependencies:[W,M,O,F,L,N,V,j]})}return n})();var gt=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Le},{path:"register",component:Ne},{path:"activate-account",component:De},{path:"recover-pass-mail",component:We},{path:"setCodeFrom/:email",component:Be},{path:"setNewPassword",component:He},{path:"bikes",loadChildren:()=>import("./chunk-TGGMEGCO.js").then(n=>n.BikeModule),canActivate:[Fe]}],Ue=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=H({type:n});static \u0275inj=B({imports:[pe.forRoot(gt),pe]})}return n})();var ze=(()=>{class n{title="ui-bikes-app";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&J(0,"router-outlet")},dependencies:[Ee]})}return n})();var Ke=(n,c)=>{let e=fe(Y).token;if(e){let i=n.clone({setHeaders:{Authorization:`Bearer ${e}`}});return c(i)}return c(n)};var Ge=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=H({type:n,bootstrap:[ze]});static \u0275inj=B({providers:[xe(Ie(),Se([Ke]))],imports:[Re,Ue,Ae,qe]})}return n})();Me().bootstrapModule(Ge,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
