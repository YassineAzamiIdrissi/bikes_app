import{$ as Ne,A as J,B as S,C as g,D as m,H as Q,I as l,J as h,K as B,L as A,M as N,N as j,O as V,P as X,Q as I,R as w,S as Ae,T as b,U as Z,_ as ee,aa as O,b as d,ba as te,c as u,ca as Me,d as $,da as ie,e as z,ea as ne,fa as k,g as H,ga as je,ha as Oe,i as C,ia as oe,j as G,ja as re,ka as ae,l as v,la as se,m as _,ma as le,n as D,na as ce,o as q,oa as De,p as a,pa as qe,q as y,qa as E,r as f,s as Y,t as p,u as R,v as Pe,w as o,x as r,y as x,z as K}from"./chunk-U6I557YQ.js";var Ve=(()=>{class i{tokenService;router;username="";constructor(e,n){this.tokenService=e,this.router=n}ngOnInit(){let e=this.tokenService.decodePayload();this.username=e.fullname}logout(){localStorage.removeItem("token"),this.router.navigate(["login"])}static \u0275fac=function(n){return new(n||i)(y(je),y(O))};static \u0275cmp=C({type:i,selectors:[["app-menu"]],decls:30,vars:1,consts:[[1,"navbar","bg-body-tertiary","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasNavbarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],[1,"fw-bold","text-primary","d-flex","align-items-center","justify-content-between"],[1,"btn","btn-link","text-danger","fw-bold",3,"click"],["aria-current","page","href","javascript:void[0]","routerLink","/bikes",1,"nav-link","active"],["aria-current","page","href","javascript:void[0]","routerLink","mine",1,"nav-link","active"],["aria-current","page","href","javascript:void[0]","routerLink","borrowed",1,"nav-link","active"],["aria-current","page","href","javascript:void[0]","routerLink","unapproved",1,"nav-link","active"],["aria-current","page","href","javascript:void[0]","routerLink","bike-form",1,"nav-link","active"],["aria-current","page","href","javascript:void[0]","routerLink","favorites",1,"nav-link","active"]],template:function(n,t){n&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),l(3," Bikes app "),r(),o(4,"button",3),x(5,"span",4),r(),o(6,"div",5)(7,"div",6)(8,"h5",7),l(9," Bikes app "),r(),x(10,"button",8),r(),o(11,"div",9)(12,"ul",10)(13,"li",11)(14,"a",12),l(15),o(16,"button",13),g("click",function(){return t.logout()}),l(17,"Logout "),r()(),o(18,"a",14),l(19,"All bikes"),r(),o(20,"a",15),l(21,"My bikes"),r(),o(22,"a",16),l(23,"Borrowed bikes"),r(),o(24,"a",17),l(25,"Unanswered returns"),r(),o(26,"a",18),l(27,"Add a new bike "),r(),o(28,"a",19),l(29,"My favorite bikes"),r()()()()()()()),n&2&&(a(15),B(" User : ",t.username," "))},dependencies:[te]})}return i})();var We=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=C({type:i,selectors:[["app-display-layout"]],decls:4,vars:0,consts:[[1,"d-flex","flex-column","gap-5"],[1,"p-4"]],template:function(n,t){n&1&&(o(0,"div",0),x(1,"app-menu"),o(2,"div",1),x(3,"router-outlet"),r()())},dependencies:[Ne,Ve]})}return i})();function pe(i,c,e,n){let t=new k(c,pe.PATH,"post");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}pe.PATH="/bikes/favorites/{bike-id}";function me(i,c,e,n){let t=new k(c,me.PATH,"patch");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}me.PATH="/bikes/approve/{bike-id}";function de(i,c,e,n){let t=new k(c,de.PATH,"post");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}de.PATH="/bikes/borrow/{bike-id}";function fe(i,c,e,n){let t=new k(c,fe.PATH,"delete");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}fe.PATH="/bikes/favorites/{bike-id}";function ue(i,c,e,n){let t=new k(c,ue.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}ue.PATH="/bikes/returned";function ge(i,c,e,n){let t=new k(c,ge.PATH,"get");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}ge.PATH="/bikes/{bike-id}";function be(i,c,e,n){let t=new k(c,be.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}be.PATH="/bikes/borrowed";function ke(i,c,e,n){let t=new k(c,ke.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}ke.PATH="/bikes/own-bikes";function ve(i,c,e,n){let t=new k(c,ve.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}ve.PATH="/bikes";function _e(i,c,e,n){let t=new k(c,_e.PATH,"get");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:String(s.body)==="true"})))}_e.PATH="/bikes/favorites/belongs/{bike-id}";function he(i,c,e,n){let t=new k(c,he.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}he.PATH="/bikes/favorites";function xe(i,c,e,n){let t=new k(c,xe.PATH,"patch");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}xe.PATH="/bikes/return/{bike-id}";function Be(i,c,e,n){let t=new k(c,Be.PATH,"post");return e&&t.body(e.body,"application/json"),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}Be.PATH="/bikes";function ye(i,c,e,n){let t=new k(c,ye.PATH,"patch");return e&&(t.path("bike-id",e["bike-id"],{}),t.body(e.body,"multipart/form-data")),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}ye.PATH="/bikes/picture/{bike-id}";function Ce(i,c,e,n){let t=new k(c,Ce.PATH,"patch");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}Ce.PATH="/bikes/repairing/{bike-id}";function we(i,c,e,n){let t=new k(c,we.PATH,"patch");return e&&t.path("bike-id",e["bike-id"],{}),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}we.PATH="/bikes/shareable/{bike-id}";var M=(()=>{class i extends ne{constructor(e,n){super(e,n)}static GetTimeLineBikesPath="/bikes";getTimeLineBikes$Response(e,n){return ve(this.http,this.rootUrl,e,n)}getTimeLineBikes(e,n){return this.getTimeLineBikes$Response(e,n).pipe(d(t=>t.body))}static SaveNewBikePath="/bikes";saveNewBike$Response(e,n){return Be(this.http,this.rootUrl,e,n)}saveNewBike(e,n){return this.saveNewBike$Response(e,n).pipe(d(t=>t.body))}static AddBikeToFavoritesPath="/bikes/favorites/{bike-id}";addBikeToFavorites$Response(e,n){return pe(this.http,this.rootUrl,e,n)}addBikeToFavorites(e,n){return this.addBikeToFavorites$Response(e,n).pipe(d(t=>t.body))}static DeleteBikeFromFavoritesPath="/bikes/favorites/{bike-id}";deleteBikeFromFavorites$Response(e,n){return fe(this.http,this.rootUrl,e,n)}deleteBikeFromFavorites(e,n){return this.deleteBikeFromFavorites$Response(e,n).pipe(d(t=>t.body))}static BorrowBikePath="/bikes/borrow/{bike-id}";borrowBike$Response(e,n){return de(this.http,this.rootUrl,e,n)}borrowBike(e,n){return this.borrowBike$Response(e,n).pipe(d(t=>t.body))}static UpdateShareableStatusPath="/bikes/shareable/{bike-id}";updateShareableStatus$Response(e,n){return we(this.http,this.rootUrl,e,n)}updateShareableStatus(e,n){return this.updateShareableStatus$Response(e,n).pipe(d(t=>t.body))}static ReturnBikePath="/bikes/return/{bike-id}";returnBike$Response(e,n){return xe(this.http,this.rootUrl,e,n)}returnBike(e,n){return this.returnBike$Response(e,n).pipe(d(t=>t.body))}static UpdateRepairingStatusPath="/bikes/repairing/{bike-id}";updateRepairingStatus$Response(e,n){return Ce(this.http,this.rootUrl,e,n)}updateRepairingStatus(e,n){return this.updateRepairingStatus$Response(e,n).pipe(d(t=>t.body))}static SetBikePicturePath="/bikes/picture/{bike-id}";setBikePicture$Response(e,n){return ye(this.http,this.rootUrl,e,n)}setBikePicture(e,n){return this.setBikePicture$Response(e,n).pipe(d(t=>t.body))}static ApproveBikePath="/bikes/approve/{bike-id}";approveBike$Response(e,n){return me(this.http,this.rootUrl,e,n)}approveBike(e,n){return this.approveBike$Response(e,n).pipe(d(t=>t.body))}static GetBikeByIdPath="/bikes/{bike-id}";getBikeById$Response(e,n){return ge(this.http,this.rootUrl,e,n)}getBikeById(e,n){return this.getBikeById$Response(e,n).pipe(d(t=>t.body))}static FindAllReturnedBikesToConnectedUserPath="/bikes/returned";findAllReturnedBikesToConnectedUser$Response(e,n){return ue(this.http,this.rootUrl,e,n)}findAllReturnedBikesToConnectedUser(e,n){return this.findAllReturnedBikesToConnectedUser$Response(e,n).pipe(d(t=>t.body))}static GetMyOwnBikesPath="/bikes/own-bikes";getMyOwnBikes$Response(e,n){return ke(this.http,this.rootUrl,e,n)}getMyOwnBikes(e,n){return this.getMyOwnBikes$Response(e,n).pipe(d(t=>t.body))}static ReadAllFavoritesOfThiUserPath="/bikes/favorites";readAllFavoritesOfThiUser$Response(e,n){return he(this.http,this.rootUrl,e,n)}readAllFavoritesOfThiUser(e,n){return this.readAllFavoritesOfThiUser$Response(e,n).pipe(d(t=>t.body))}static IsBikeInFavoritesPath="/bikes/favorites/belongs/{bike-id}";isBikeInFavorites$Response(e,n){return _e(this.http,this.rootUrl,e,n)}isBikeInFavorites(e,n){return this.isBikeInFavorites$Response(e,n).pipe(d(t=>t.body))}static GetBorrowedBikesPath="/bikes/borrowed";getBorrowedBikes$Response(e,n){return be(this.http,this.rootUrl,e,n)}getBorrowedBikes(e,n){return this.getBorrowedBikes$Response(e,n).pipe(d(t=>t.body))}static \u0275fac=function(n){return new(n||i)(H(ie),H(Z))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Se(i,c,e,n){let t=new k(c,Se.PATH,"post");return e&&t.body(e.body,"application/json"),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s.clone({body:parseFloat(String(s.body))})))}Se.PATH="/feedbacks";function Te(i,c,e,n){let t=new k(c,Te.PATH,"get");return e&&(t.query("page",e.page,{}),t.query("size",e.size,{}),t.path("bike-id",e["bike-id"],{})),i.request(t.build({responseType:"json",accept:"application/json",context:n})).pipe(u(s=>s instanceof b),d(s=>s))}Te.PATH="/feedbacks/bike/{bike-id}";var Ie=(()=>{class i extends ne{constructor(e,n){super(e,n)}static CreatedFeedbackPath="/feedbacks";createdFeedback$Response(e,n){return Se(this.http,this.rootUrl,e,n)}createdFeedback(e,n){return this.createdFeedback$Response(e,n).pipe(d(t=>t.body))}static ReadAllFeedbacksOfBikePath="/feedbacks/bike/{bike-id}";readAllFeedbacksOfBike$Response(e,n){return Te(this.http,this.rootUrl,e,n)}readAllFeedbacksOfBike(e,n){return this.readAllFeedbacksOfBike$Response(e,n).pipe(d(t=>t.body))}static \u0275fac=function(n){return new(n||i)(H(ie),H(Z))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Le=()=>[];function it(i,c){i&1&&(K(0),x(1,"img",2),J())}function nt(i,c){i&1&&(K(0),x(1,"img",3),J())}function ot(i,c){i&1&&(K(0),x(1,"img",4),J())}var L=(()=>{class i{rating=0;maxRating=5;get completeStars(){return Math.floor(this.rating)}get halfStars(){return Math.floor(this.rating)!=this.rating}get emptyStars(){return this.maxRating-Math.ceil(this.rating)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=C({type:i,selectors:[["app-rating"]],inputs:{rating:"rating"},decls:3,vars:5,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["src","/comp_star.png",1,"icon","clickable"],["src","/uncomp_star.png",1,"icon","clickable"],["src","/empty_star.png",1,"icon","clickable"]],template:function(n,t){n&1&&f(0,it,2,0,"ng-container",0)(1,nt,2,0,"ng-container",1)(2,ot,2,0,"ng-container",0),n&2&&(p("ngForOf",V(3,Le).constructor(t.completeStars)),a(),p("ngIf",t.halfStars),a(),p("ngForOf",V(4,Le).constructor(t.emptyStars)))},dependencies:[I,w]})}return i})();function rt(i,c){if(i&1&&(o(0,"p",3),l(1),r()),i&2){let e=m();a(),B("",e.username," : \xA0 ")}}function at(i,c){if(i&1&&(o(0,"p",4),l(1),r()),i&2){let e=m();a(),B("",e.username," (You) : \xA0")}}var Ue=(()=>{class i{own=!1;username="";comment="";static \u0275fac=function(n){return new(n||i)};static \u0275cmp=C({type:i,selectors:[["app-comment"]],inputs:{own:"own",username:"username",comment:"comment"},decls:5,vars:3,consts:[[1,"d-flex","align-items-center","justify-content-start","mb-2"],["class","fw-bold",4,"ngIf"],["class","fw-bold text-success",4,"ngIf"],[1,"fw-bold"],[1,"fw-bold","text-success"]],template:function(n,t){n&1&&(o(0,"div",0),f(1,rt,2,1,"p",1)(2,at,2,1,"p",2),o(3,"p"),l(4),r()()),n&2&&(a(),p("ngIf",!t.own),a(),p("ngIf",t.own),a(2),h(t.comment))},dependencies:[w]})}return i})();var lt=()=>[];function ct(i,c){i&1&&(o(0,"div",20),l(1," Not shareable "),r())}function pt(i,c){i&1&&(o(0,"div",21),l(1," Under reparations "),r())}function mt(i,c){if(i&1&&(o(0,"div",22),x(1,"app-rating",23),r()),i&2){let e=m();a(),p("rating",e._bike.rating||0)}}function dt(i,c){i&1&&(o(0,"p"),l(1,"No rates for the moment "),r())}function ft(i,c){if(i&1){let e=S();o(0,"div",24)(1,"img",25),g("click",function(){v(e);let t=m();return _(t.onDetails())}),r(),o(2,"img",26),g("click",function(){v(e);let t=m();return _(t.onBorrow())}),r(),o(3,"img",27),g("click",function(){v(e);let t=m();return _(t.onFavorite())}),r()()}if(i&2){let e=m();a(3),p("src",e.bike.favorite?"/valentin.png":"/empty.png",q)}}function ut(i,c){if(i&1){let e=S();o(0,"div",24)(1,"img",28),g("click",function(){v(e);let t=m();return _(t.onShare())}),r(),o(2,"img",29),g("click",function(){v(e);let t=m();return _(t.onEdit())}),r(),o(3,"img",30),g("click",function(){v(e);let t=m();return _(t.onRepair())}),r()()}}function gt(i,c){if(i&1&&x(0,"app-comment",43),i&2){let e=c.$implicit;p("username",e.username)("comment",e.comment)("own",e.ownComment)}}function bt(i,c){if(i&1){let e=S();o(0,"li",40)(1,"a",41),g("click",function(){let t=v(e).index,s=m(2);return _(s.moveToPage(t))}),l(2),r()()}if(i&2){let e=c.index,n=m(2);a(),R("active",n.page==e),a(),h(e+1)}}function kt(i,c){if(i&1){let e=S();o(0,"div",31)(1,"div",32)(2,"h3",33),l(3," What people say about : "),o(4,"span",34),l(5),r()()(),o(6,"div",35),f(7,gt,1,3,"app-comment",36),r(),o(8,"div",37)(9,"nav",38)(10,"ul",39)(11,"li",40)(12,"a",41),g("click",function(){v(e);let t=m();return _(t.moveToFirst())}),l(13,"First"),r()(),o(14,"li",40)(15,"a",41),g("click",function(){v(e);let t=m();return _(t.moveToPrevious())}),l(16,"Previous"),r()(),f(17,bt,3,3,"li",42),o(18,"li",40)(19,"a",41),g("click",function(){v(e);let t=m();return _(t.moveToNext())}),l(20,"Next"),r()(),o(21,"li",40)(22,"a",41),g("click",function(){v(e);let t=m();return _(t.moveToLast())}),l(23,"Last"),r()()()()()()}if(i&2){let e=m();a(5),h(e._bike.bikeName),a(2),p("ngForOf",e.commentsPage.content),a(5),R("disabled",e.page==0),a(3),R("disabled",e.page==0),a(2),p("ngForOf",V(11,lt).constructor(e.commentsPage.totalPages)),a(2),R("disabled",e.commentsPage.last),a(3),R("disabled",e.commentsPage.last)}}function vt(i,c){if(i&1&&(o(0,"div",31)(1,"div",32)(2,"h3",44),l(3," What people say about : "),o(4,"span",34),l(5),r()()(),o(6,"div",35)(7,"p",45),l(8,"No comments added yet.."),r()()()),i&2){let e=m();a(5),h(e._bike.bikeName)}}var Fe=(()=>{class i{feedbackService;page=0;size=5;commentsPage={};explicitDescription="";constructor(e){this.feedbackService=e}ngOnInit(){this.fetchBikeFeedbacks()}fetchBikeFeedbacks(){this.feedbackService.readAllFeedbacksOfBike({page:this.page,size:this.size,"bike-id":this._bike.id}).subscribe({next:e=>{this.commentsPage=e},error:e=>{console.error("AN ERROR OCCURRED CHECK CONSOLE : "),console.log(e)}})}_bike={};_manage=!1;_bikePicture="";borrow=new D;favorite=new D;details=new D;share=new D;edit=new D;repair=new D;onRepair(){this.repair.emit(this._bike)}onBorrow(){this.borrow.emit(this._bike)}onFavorite(){this.favorite.emit(this._bike)}onShare(){this.share.emit(this._bike)}onEdit(){this.edit.emit(this._bike)}onDetails(){this.details.emit(this._bike)}get manage(){return this._manage}get bike(){return this._bike}get bikePicture(){return this._bike.picture?"data:image/jpg;base64, "+this._bike.picture:"https://thumbs.dreamstime.com/b/default-image-icon-vector-missing-picture-page-website-design-mobile-app-no-photo-available-236105299.jpg"}set bikePicture(e){this._bikePicture=e}set manage(e){this._manage=e}set bike(e){this._bike=e}moveToFirst(){this.page=0,this.fetchBikeFeedbacks()}moveToPage(e){this.page=e,this.fetchBikeFeedbacks()}moveToNext(){this.page++,this.fetchBikeFeedbacks()}moveToLast(){this.page=this.commentsPage.totalPages-1,this.fetchBikeFeedbacks()}moveToPrevious(){this.page--,this.fetchBikeFeedbacks()}static \u0275fac=function(n){return new(n||i)(y(Ie))};static \u0275cmp=C({type:i,selectors:[["app-bike-card"]],inputs:{explicitDescription:"explicitDescription",manage:"manage",bike:"bike"},outputs:{borrow:"borrow",favorite:"favorite",details:"details",share:"share",edit:"edit",repair:"repair"},decls:31,vars:16,consts:[["noRating",""],[1,"card",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],["class","alert alert-dark mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["src","/bicyclette.png",1,"icon"],["src","/utilisateur.png",1,"icon"],["src","/identifiant.png",1,"icon"],["class","d-flex gap-1 p-2",4,"ngIf","ngIfElse"],["class","d-flex align-items-center justify-content-around p-1",4,"ngIf"],[1,"d-flex","justify-content-end","p-2"],["type","button","data-bs-toggle","modal","data-bs-whatever","@mdo",1,"btn","btn-primary"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-scrollable"],["class","modal-content",4,"ngIf"],[1,"alert","alert-dark","mt-3"],[1,"alert","alert-info","mt-3"],[1,"d-flex","gap-1","p-2"],[3,"rating"],[1,"d-flex","align-items-center","justify-content-around","p-1"],["src","/detail.png","aria-label","show-bike-details",1,"icon","clickable",3,"click"],["src","/ventes.png","aria-label","borrow-bike",1,"icon","clickable",3,"click"],["aria-label","add-bike-to-favorites",1,"icon","clickable",3,"click","src"],["src","/dm.png","aria-label","share-bike",1,"icon","clickable","p-1",3,"click"],["src","/edition.png","aria-label","edit-bike",1,"icon","clickable","p-1",3,"click"],["src","/outils-de-reparation.png","aria-label","repair-bike",1,"icon","clickable",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5"],[1,"text-primary"],[1,"modal-body"],[3,"username","comment","own",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],["href","javascript:void[0]",1,"page-link",3,"click"],["class","page-item",4,"ngFor","ngForOf"],[3,"username","comment","own"],["id","exampleModalLabel-alt",1,"modal-title","fs-5"],[1,"fw-bold"]],template:function(n,t){if(n&1&&(o(0,"div",1),x(1,"img",2),f(2,ct,2,0,"div",3)(3,pt,2,0,"div",4),o(4,"div",5)(5,"h5",6),l(6),r(),o(7,"p",7),l(8),r()(),o(9,"ul",8)(10,"li",9),x(11,"img",10),l(12),r(),o(13,"li",9),x(14,"img",11),l(15),r(),o(16,"li",9),x(17,"img",12),l(18),r()(),f(19,mt,2,1,"div",13)(20,dt,2,0,"ng-template",null,0,X)(22,ft,4,1,"div",14)(23,ut,4,0,"div",14),o(24,"div",15)(25,"button",16),l(26,"Check feedbacks "),r()()(),o(27,"div",17)(28,"div",18),f(29,kt,24,12,"div",19)(30,vt,9,1,"div",19),r()()),n&2){let s=Q(21);a(),p("src",t.bikePicture,q),a(),p("ngIf",t.manage&&!t.bike.shareable),a(),p("ngIf",t.manage&&t.bike.repairing),a(3),h(t.bike.bikeName),a(2),B(" ",t.explicitDescription?t.explicitDescription.length<65?t.explicitDescription:t.explicitDescription.slice(0,65)+"...":""," "),a(4),B(" \xA0 ",t.bike.bikeName," "),a(3),B(" \xA0 ",t.bike.ownerName," "),a(3),B(" \xA0 ",t.bike.techIdentifier," "),a(),p("ngIf",t._bike.rating!=null)("ngIfElse",s),a(3),p("ngIf",!t.manage),a(),p("ngIf",t.manage),a(2),Y("data-bs-target","#modal"+t._bike.id),a(2),p("id","modal"+t._bike.id),a(2),p("ngIf",t.commentsPage.content==null?null:t.commentsPage.content.length),a(),p("ngIf",!(t.commentsPage.content!=null&&t.commentsPage.content.length))}},dependencies:[I,w,L,Ue],styles:[".card-img-top[_ngcontent-%COMP%]{height:170px!important}"]})}return i})();var _t=()=>[];function ht(i,c){if(i&1&&(o(0,"div",10),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function xt(i,c){if(i&1&&(o(0,"div",11),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function Bt(i,c){if(i&1){let e=S();o(0,"app-bike-card",14),g("borrow",function(t){v(e);let s=m(2);return _(s.borrowBike(t))})("favorite",function(t){v(e);let s=m(2);return _(s.favoriteBike(t))})("details",function(t){v(e);let s=m(2);return _(s.navigateToDetails(t))}),r()}if(i&2){let e=c.$implicit;p("bike",e)("explicitDescription",e.description?e.description:"")}}function yt(i,c){if(i&1&&(o(0,"div",12),f(1,Bt,1,2,"app-bike-card",13),r()),i&2){let e=m();a(),p("ngForOf",e.timelineBikes.content)}}function Ct(i,c){i&1&&(o(0,"div")(1,"p",15),l(2,"no bikes found for the moment"),r()())}function wt(i,c){if(i&1){let e=S();o(0,"li",6)(1,"a",7),g("click",function(){let t=v(e).index,s=m();return _(s.moveToPage(t))}),l(2),r()()}if(i&2){let e=c.index,n=m();a(),R("active",n.page==e),a(),h(e+1)}}var ze=(()=>{class i{bikeService;router;page=0;size=3;timelineBikes={};loader=!0;actionMessage="";actionSuccess=!1;constructor(e,n){this.bikeService=e,this.router=n}ngOnInit(){this.fetchTimelineBikes()}fetchTimelineBikes(){this.loader=!0,this.bikeService.getTimeLineBikes({page:this.page,size:this.size}).subscribe({next:e=>{this.timelineBikes=e},error:()=>{console.log("error")}}),this.loader=!1}moveToNext(){this.page=this.page+1,this.fetchTimelineBikes()}moveToLast(){this.page=this.timelineBikes.totalPages-1,this.fetchTimelineBikes()}moveToPrevious(){this.page=this.page-1,this.fetchTimelineBikes()}moveToFirst(){this.page=0,this.fetchTimelineBikes()}moveToPage(e){this.page=e,this.fetchTimelineBikes()}borrowBike(e){this.bikeService.borrowBike({"bike-id":e.id}).subscribe({next:()=>{this.actionMessage="Bike "+e.bikeName+" borrowed successfully",this.actionSuccess=!0,setTimeout(()=>{this.actionMessage=""},3e3)},error:n=>{this.actionMessage=n.error.message,this.actionSuccess=!1,console.log(n),setTimeout(()=>{this.actionMessage=""},3e3)}})}navigateToDetails(e){this.router.navigate(["/bikes/bike-details",e.id])}favoriteBike(e){e.favorite?this.bikeService.deleteBikeFromFavorites({"bike-id":e.id}).subscribe({next:()=>{this.actionMessage=`${e.bikeName} is no longer in your favorites`,this.actionSuccess=!0,e.favorite=!1,setTimeout(()=>{this.actionMessage=""},5e3)},error:n=>{console.log(n),this.actionSuccess=!1,setTimeout(()=>{this.actionMessage=""},5e3)}}):this.bikeService.addBikeToFavorites({"bike-id":e.id}).subscribe({next:()=>{e.favorite=!0,this.actionMessage=`${e.bikeName} is now in your favorites`,this.actionSuccess=!0,setTimeout(()=>{this.actionMessage=""},5e3)},error:n=>{this.actionMessage=n.error.message,this.actionSuccess=!1,console.log(n),setTimeout(()=>{this.actionMessage=""},5e3)}})}static \u0275fac=function(n){return new(n||i)(y(M),y(O))};static \u0275cmp=C({type:i,selectors:[["app-all-bikes"]],decls:19,vars:14,consts:[["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","d-flex gap-3 flex-wrap",4,"ngIf"],[4,"ngIf"],["aria-label","Page navigation example",1,"pagination-custom"],[1,"pagination"],[1,"page-item"],["href","javascript:void[0]",1,"page-link",3,"click"],["aria-label","Previous","href","javascript:void[0]",1,"page-link",3,"click"],["class","page-item",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"d-flex","gap-3","flex-wrap"],[3,"bike","explicitDescription","borrow","favorite","details",4,"ngFor","ngForOf"],[3,"borrow","favorite","details","bike","explicitDescription"],[1,"text","text-primary"]],template:function(n,t){n&1&&(f(0,ht,2,1,"div",0)(1,xt,2,1,"div",1)(2,yt,2,1,"div",2)(3,Ct,3,0,"div",3),o(4,"nav",4)(5,"ul",5)(6,"li",6)(7,"a",7),g("click",function(){return t.moveToFirst()}),l(8,"First"),r()(),o(9,"li",6)(10,"a",8),g("click",function(){return t.moveToPrevious()}),l(11,"Previous"),r()(),f(12,wt,3,3,"li",9),o(13,"li",6)(14,"a",7),g("click",function(){return t.moveToNext()}),l(15,"Next"),r()(),o(16,"li",6)(17,"a",7),g("click",function(){return t.moveToLast()}),l(18,"Last"),r()()()()),n&2&&(p("ngIf",t.actionMessage&&t.actionSuccess),a(),p("ngIf",t.actionMessage&&!t.actionSuccess),a(),p("ngIf",t.timelineBikes.content==null?null:t.timelineBikes.content.length),a(),p("ngIf",!(t.timelineBikes.content!=null&&t.timelineBikes.content.length)),a(4),R("disabled",t.page==0),a(3),R("disabled",t.page==0),a(2),p("ngForOf",V(13,_t).constructor(t.timelineBikes.totalPages)),a(2),R("disabled",t.timelineBikes.last),a(3),R("disabled",t.timelineBikes.last))},dependencies:[I,w,Fe],styles:[".pagination-custom[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:1rem}"]})}return i})();function St(i,c){if(i&1&&(o(0,"div",5),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function Tt(i,c){if(i&1&&(o(0,"div",6),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function It(i,c){if(i&1){let e=S();o(0,"app-bike-card",9),g("share",function(t){v(e);let s=m(2);return _(s.handleShare(t))})("repair",function(t){v(e);let s=m(2);return _(s.handleRepair(t))})("edit",function(t){v(e);let s=m(2);return _(s.handleEdit(t))}),r()}if(i&2){let e=c.$implicit;p("bike",e)("manage",!0)("explicitDescription",e.description?e.description:"")}}function Ft(i,c){if(i&1&&(o(0,"div",7),f(1,It,1,3,"app-bike-card",8),r()),i&2){let e=m();a(),p("ngForOf",e.ownBikesPage.content)}}function Mt(i,c){i&1&&(o(0,"div",7)(1,"p",10),l(2,"No bikes for the moment.."),r()())}var Ge=(()=>{class i{bikeService;router;page=0;size=3;ownBikesPage={};actionMessage="";actionWitness=!1;constructor(e,n){this.bikeService=e,this.router=n,this.fetchMyBikes()}ngOnInit(){}fetchMyBikes(){this.bikeService.getMyOwnBikes({page:this.page,size:this.size}).subscribe({next:e=>{this.ownBikesPage=e},error:e=>{this.actionMessage="Something went wrong trying to fetch your own bikes !",this.actionWitness=!1,console.log("in fetchMyBikes"),console.log(e)}})}handleShare(e){this.bikeService.updateShareableStatus({"bike-id":e.id}).subscribe({next:()=>{console.log("shareable status"),console.log(e.shareable),e.shareable=!e.shareable,e.shareable?this.actionMessage=`Bike ${e.bikeName} is now shareable`:this.actionMessage=`Bike ${e.bikeName} is no longer shareable`,this.actionWitness=!0,setTimeout(()=>{this.actionMessage=""},5e3)},error:n=>{this.actionMessage="Something went wrong",this.actionWitness=!1,setTimeout(()=>{this.actionMessage=""},5e3),console.log("in fetchMyBikes"),console.log(n)}})}handleRepair(e){this.bikeService.updateRepairingStatus({"bike-id":e.id}).subscribe({next:()=>{e.repairing=!e.repairing,e.repairing?this.actionMessage=`Bike ${e.bikeName} is set to reparations`:this.actionMessage=`Bike ${e.bikeName} is no longer under reparations`,setTimeout(()=>{this.actionMessage=""},5e3),this.actionWitness=!0},error:n=>{this.actionMessage="Something went wrong",this.actionWitness=!1,setTimeout(()=>{this.actionMessage=""},5e3),console.log("in handleRepair"),console.log(n)}})}handleEdit(e){this.router.navigate(["/bikes/bike-form-edit",e.id])}static \u0275fac=function(n){return new(n||i)(y(M),y(O))};static \u0275cmp=C({type:i,selectors:[["app-my-bikes"]],decls:7,vars:4,consts:[[1,"d-flex","align-items-center","justify-content-end","mb-3","mt-3"],["routerLink","/bikes/bike-form",1,"btn","btn-primary"],["class","alert alert-success mt-3 mt-3","role","alert",4,"ngIf"],["class","alert alert-danger mt-3 mt-3","role","alert",4,"ngIf"],["class","d-flex gap-3 flex-wrap",4,"ngIf"],["role","alert",1,"alert","alert-success","mt-3","mt-3"],["role","alert",1,"alert","alert-danger","mt-3","mt-3"],[1,"d-flex","gap-3","flex-wrap"],[3,"bike","manage","explicitDescription","share","repair","edit",4,"ngFor","ngForOf"],[3,"share","repair","edit","bike","manage","explicitDescription"],[1,"fw-bold","text-primary","text-center"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"button",1),l(2,"Add a new bike"),r()(),f(3,St,2,1,"div",2)(4,Tt,2,1,"div",3)(5,Ft,2,1,"div",4)(6,Mt,3,0,"div",4)),n&2&&(a(3),p("ngIf",t.actionWitness&&t.actionMessage),a(),p("ngIf",!t.actionMessage&&t.actionMessage),a(),p("ngIf",t.ownBikesPage==null||t.ownBikesPage.content==null?null:t.ownBikesPage.content.length),a(),p("ngIf",!(!(t.ownBikesPage==null||t.ownBikesPage.content==null)&&t.ownBikesPage.content.length)))},dependencies:[I,w,te,Fe]})}return i})();function Rt(i,c){if(i&1&&(o(0,"div",6),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function Et(i,c){if(i&1&&(o(0,"div",7),l(1),r()),i&2){let e=m();a(),B(" ",e.actionMessage,`
`)}}function Pt(i,c){if(i&1){let e=S();o(0,"td",10)(1,"button",11),g("click",function(){v(e);let t=m().$implicit,s=m();return _(s.acceptReturn(t))}),l(2,"Accept"),r()()}}function At(i,c){i&1&&(o(0,"td",10)(1,"p",12),l(2,"Returned"),r()())}function Nt(i,c){if(i&1&&(o(0,"tr")(1,"th",8),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),f(9,Pt,3,0,"td",9)(10,At,3,0,"td",9),r()),i&2){let e=c.$implicit;Pe(e.accepted?"table-success":""),a(2),h(e.techIdentifier),a(2),h(e.bikeName),a(2),h(e.borrowedBy),a(2),h(e.borrowedDate),a(),p("ngIf",!e.accepted),a(),p("ngIf",e.accepted)}}var Ye=(()=>{class i{bikeService;page=0;size=22;returnsPage={};actionMessage="";actionWitness=!1;constructor(e){this.bikeService=e}ngOnInit(){this.fetchReturns()}fetchReturns(){this.bikeService.findAllReturnedBikesToConnectedUser({page:this.page,size:this.size}).subscribe({next:e=>{this.returnsPage=e},error:e=>{console.log("An error occurred trying to fetch returns"),console.log(e)}})}acceptReturn(e){this.bikeService.approveBike({"bike-id":e.id}).subscribe({next:()=>{e.accepted=!0,this.actionMessage="Bike accepted successfully",this.actionWitness=!0,setTimeout(()=>{this.actionMessage=""},3e3)},error:n=>{this.actionMessage="Something went wrong... try again later",this.actionWitness=!1,setTimeout(()=>{this.actionMessage=""},5e3),console.log("ACCEPT RETURN :: "),console.log(n)}})}static \u0275fac=function(n){return new(n||i)(y(M))};static \u0275cmp=C({type:i,selectors:[["app-waiting-list"]],decls:19,vars:3,consts:[[1,"text-primary"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"table"],["scope","col"],[3,"style",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["scope","row"],["class","d-flex gap-2 align-items-center",4,"ngIf"],[1,"d-flex","gap-2","align-items-center"],[1,"btn","btn-success",3,"click"],[1,"center"]],template:function(n,t){n&1&&(o(0,"h3",0),l(1,"Your returns list"),r(),f(2,Rt,2,1,"div",1)(3,Et,2,1,"div",2),o(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),l(8,"Tech Identifier"),r(),o(9,"th",4),l(10,"Bike"),r(),o(11,"th",4),l(12,"Borrowed by"),r(),o(13,"th",4),l(14,"Borrow date"),r(),o(15,"th",4),l(16,"Actions"),r()()(),o(17,"tbody"),f(18,Nt,11,8,"tr",5),r()()),n&2&&(a(2),p("ngIf",t.actionWitness&&t.actionMessage),a(),p("ngIf",!t.actionWitness&&t.actionMessage),a(15),p("ngForOf",t.returnsPage.content))},dependencies:[I,w]})}return i})();function Ot(i,c){if(i&1&&(o(0,"button",28),l(1," return "),r()),i&2){let e=m().$implicit;Y("data-bs-target","#bikeFeedbackModal"+e.id)}}function Dt(i,c){i&1&&(o(0,"span",29),l(1," Pending.. "),r())}function qt(i,c){i&1&&(o(0,"span",30),l(1," Accepted by the owner "),r())}function Vt(i,c){if(i&1&&(o(0,"div",31),l(1),r()),i&2){let e=m(3);a(),B(" ",e.actionMessage," ")}}function Wt(i,c){if(i&1&&(o(0,"div",32),l(1),r()),i&2){let e=m(3);a(),B(" ",e.actionMessage," ")}}function Ht(i,c){if(i&1&&(o(0,"div",32)(1,"p",33),l(2),r()()),i&2){let e=c.$implicit;a(2),B(" ",e," ")}}function Lt(i,c){if(i&1){let e=S();o(0,"tr")(1,"th",6),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),f(8,Ot,2,1,"button",7)(9,Dt,2,0,"span",8)(10,qt,2,0,"span",9),r(),o(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"h3",1),l(16,"Your thoughts on "),o(17,"span",14),l(18),r()()(),o(19,"div",15)(20,"form")(21,"div",16)(22,"label",17),l(23,"Rating"),r(),o(24,"input",18),j("ngModelChange",function(t){v(e);let s=m(2);return N(s.mark,t)||(s.mark=t),_(t)}),r(),x(25,"app-rating",19),r(),o(26,"div",16)(27,"label",20),l(28,"Comment:"),r(),o(29,"textarea",21),j("ngModelChange",function(t){v(e);let s=m(2);return N(s.comment,t)||(s.comment=t),_(t)}),r()()(),f(30,Vt,2,1,"div",22)(31,Wt,2,1,"div",23)(32,Ht,3,1,"div",24),r(),o(33,"div",25)(34,"button",26),l(35,"Close"),r(),o(36,"button",27),g("click",function(){let t=v(e).$implicit,s=m(2);return _(s.returnBike(t))}),l(37,"Send "),r()()()()()()}if(i&2){let e=c.$implicit,n=m(2);a(2),h(e.techIdentifier),a(2),h(e.bikeName),a(2),h(e.ownerName),a(2),p("ngIf",!e.returned),a(),p("ngIf",e.returned&&!e.accepted),a(),p("ngIf",e.returned&&e.accepted),a(),p("id","bikeFeedbackModal"+e.id),a(7),h(e.bikeName),a(6),A("ngModel",n.mark),p("name","rating"+e.id)("min",0)("max",5)("step",.5),a(),p("rating",n.mark),a(4),A("ngModel",n.comment),p("name","comment of "+e.id),a(),p("ngIf",n.actionWitness&&n.actionMessage),a(),p("ngIf",!n.actionWitness&&n.actionMessage),a(),p("ngForOf",n.validationErrors)}}function Ut(i,c){if(i&1&&(o(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),l(4,"Tech identifier"),r(),o(5,"th",4),l(6,"Bike name"),r(),o(7,"th",4),l(8,"Owner name"),r(),o(9,"th",4),l(10,"Status"),r()()(),o(11,"tbody"),f(12,Lt,38,19,"tr",5),r()()),i&2){let e=m();a(12),p("ngForOf",e.borrowedBikesPage.content)}}function $t(i,c){i&1&&(o(0,"p",34),l(1," No bikes borrowed yet "),r())}var Ke=(()=>{class i{bikeService;feedbackService;page=0;size=5;borrowedBikesPage={};bike={};mark=0;comment="";actionMessage="";actionWitness=!1;validationErrors=[];constructor(e,n){this.bikeService=e,this.feedbackService=n}ngOnInit(){this.fetchBorrowedBikes()}fetchBorrowedBikes(){this.bikeService.getBorrowedBikes({page:this.page,size:this.size}).subscribe({next:e=>{this.borrowedBikesPage=e},error:e=>{console.log("Something went wrong"),console.log(e)}})}addFeedback(e,n,t){this.feedbackService.createdFeedback({body:{bikeId:e.id,comment:n,mark:t}}).subscribe({next:()=>{this.actionMessage="returned successfully, waiting for the owner's action",this.actionWitness=!0,setTimeout(()=>{this.actionMessage=""},3e3)},error:s=>{this.validationErrors=s.error.errors,console.log("ERROR IN addFeedback"),console.log(s)}})}returnBike(e){this.validationErrors=[],this.actionMessage="",this.actionWitness=!1,this.bikeService.returnBike({"bike-id":e.id}).subscribe({next:()=>{e.returned=!0,this.addFeedback(e,this.comment,this.mark),this.mark=0,this.comment=""},error:n=>{this.actionMessage=n.error.message,this.actionWitness=!1,console.log("ERROR IN returnBike"),console.log(n)}})}static \u0275fac=function(n){return new(n||i)(y(M),y(Ie))};static \u0275cmp=C({type:i,selectors:[["app-borrowed-bikes"]],decls:5,vars:2,consts:[["nothing",""],[1,"text-primary"],["class","table",4,"ngIf","ngIfElse"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button","class","btn btn-primary","data-bs-toggle","modal",4,"ngIf"],["class","btn btn-warning",4,"ngIf"],["class","btn btn-success",4,"ngIf"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"text-dark"],[1,"modal-body"],[1,"mb-3"],["for","customRange1",1,"form-label"],["type","range","id","customRange1",1,"form-range",3,"ngModelChange","ngModel","name","min","max","step"],[3,"rating"],["for","message-text",1,"col-form-label"],["id","message-text","rows","5",1,"form-control",2,"resize","none",3,"ngModelChange","ngModel","name"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-danger",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary"],[1,"btn","btn-warning"],[1,"btn","btn-success"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"p-0","m-0"],[1,"fw-bold"]],template:function(n,t){if(n&1&&(o(0,"h3",1),l(1,"Borrowed bikes"),r(),f(2,Ut,13,1,"table",2)(3,$t,2,0,"ng-template",null,0,X)),n&2){let s=Q(4);a(2),p("ngIf",t.borrowedBikesPage.content==null?null:t.borrowedBikesPage.content.length)("ngIfElse",s)}},dependencies:[I,w,ce,oe,De,re,ae,le,se,L]})}return i})();function zt(i,c){if(i&1&&(o(0,"p",23),l(1),r()),i&2){let e=c.$implicit;a(),B(" ",e," ")}}function Gt(i,c){if(i&1&&(o(0,"div",21),f(1,zt,2,1,"p",22),r()),i&2){let e=m();a(),p("ngForOf",e.validationErrors)}}var Ee=(()=>{class i{bikeService;router;activateRouter;selectedPic="";selectedFile;bikeRequest={bikeName:"",description:"",shareable:!1,techIdentifier:""};bikeId=0;validationErrors=[];debugMessage="";staticBikeName="";constructor(e,n,t){this.bikeService=e,this.router=n,this.activateRouter=t}ngOnInit(){this.bikeId=this.activateRouter.snapshot.params.bikeId,console.log(this.bikeId),this.bikeId&&this.fetchConcernedBike(),console.log("Selected picture"),console.log(this.selectedPic)}fetchConcernedBike(){this.bikeService.getBikeById({"bike-id":this.bikeId}).subscribe({next:e=>{this.bikeRequest.id=e.id,this.bikeRequest.bikeName=e.bikeName,this.staticBikeName=e.bikeName,this.bikeRequest.description=e.description,this.bikeRequest.shareable=e.shareable,this.bikeRequest.techIdentifier=e.techIdentifier,this.selectedPic="data:image/jpg;base64, "+e.picture},error:e=>{console.log("Fetching the concerned bike"),console.log(e)}})}setFile(e){if(this.selectedFile=e.target.files[0],this.selectedFile){let n=new FileReader;n.onload=()=>{this.selectedPic=n.result},n.readAsDataURL(this.selectedFile)}}saveBike(){this.validationErrors=[],this.bikeService.saveNewBike({body:this.bikeRequest}).subscribe({next:e=>{this.bikeId&&(this.bikeRequest.id=this.bikeId),this.selectedFile?this.bikeService.setBikePicture({"bike-id":e,body:{file:this.selectedFile}}).subscribe({next:()=>{this.router.navigate(["/bikes/mine"]),this.bikeId&&this.router.navigate(["/bikes/mine"])},error:n=>{this.debugMessage="Something went wrong setBikePicture",console.log(n)}}):this.router.navigate(["/bikes/mine"])},error:e=>{console.log(e),this.validationErrors=e.error.errors}})}resetData(){this.bikeRequest={bikeName:"",description:"",shareable:!1,techIdentifier:""}}static \u0275fac=function(n){return new(n||i)(y(M),y(O),y(ee))};static \u0275cmp=C({type:i,selectors:[["app-bike-form"]],decls:30,vars:8,consts:[[1,"d-flex","gap-2"],[1,"col-3"],["height","100%","width","100%",3,"src"],[1,"mb-3","mt-3"],["type","file","id","formFileDisabled",1,"form-control",3,"change"],[1,"col-9","p-3"],["class","alert alert-danger mt-3 mb-3","role","alert",4,"ngIf"],[1,"text-primary","fw-bold"],[1,"mb-3"],["for","bikeName",1,"form-label"],["type","text","id","bikeName","name","bikeName",1,"form-control",3,"ngModelChange","ngModel"],["for","bikeIdentifier",1,"form-label"],["type","text","id","bikeIdentifier","name","bikeTechId",1,"form-control",3,"ngModelChange","ngModel"],["for","bikeDesc",1,"form-label"],["rows","5","id","bikeDesc","name","bikeDesc",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-3","form-check"],["type","checkbox","id","shareable","name","bikeShare",1,"form-check-input",3,"ngModelChange","ngModel"],["for","shareable",1,"form-check-label"],[1,"d-flex","gap-4"],["type","submit",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["role","alert",1,"alert","alert-danger","mt-3","mb-3"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"div",1),x(2,"img",2),o(3,"div",3)(4,"input",4),g("change",function(T){return t.setFile(T)}),r()()(),o(5,"form",5),f(6,Gt,2,1,"div",6),o(7,"h3",7),l(8),r(),o(9,"div",8)(10,"label",9),l(11,"The bike name"),r(),o(12,"input",10),j("ngModelChange",function(T){return N(t.bikeRequest.bikeName,T)||(t.bikeRequest.bikeName=T),T}),r()(),o(13,"div",8)(14,"label",11),l(15,"Tech Identifier"),r(),o(16,"input",12),j("ngModelChange",function(T){return N(t.bikeRequest.techIdentifier,T)||(t.bikeRequest.techIdentifier=T),T}),r()(),o(17,"div",8)(18,"label",13),l(19,"Bike description"),r(),o(20,"textarea",14),j("ngModelChange",function(T){return N(t.bikeRequest.description,T)||(t.bikeRequest.description=T),T}),r()(),o(21,"div",15)(22,"input",16),j("ngModelChange",function(T){return N(t.bikeRequest.shareable,T)||(t.bikeRequest.shareable=T),T}),r(),o(23,"label",17),l(24,"Initially Shareable"),r()(),o(25,"div",18)(26,"button",19),g("click",function(){return t.saveBike()}),l(27),r(),o(28,"button",20),g("click",function(){return t.resetData()}),l(29," Reset "),r()()()()),n&2&&(a(2),p("src",t.selectedPic||"https://thumbs.dreamstime.com/b/default-image-icon-vector-missing-picture-page-website-design-mobile-app-no-photo-available-236105299.jpg",q),a(4),p("ngIf",t.validationErrors.length),a(2),h(t.bikeId?"Update bike : "+t.staticBikeName:"Define your bike :"),a(4),A("ngModel",t.bikeRequest.bikeName),a(4),A("ngModel",t.bikeRequest.techIdentifier),a(4),A("ngModel",t.bikeRequest.description),a(2),A("ngModel",t.bikeRequest.shareable),a(5),B("",t.bikeId?"Update":"Add"," "))},dependencies:[I,w,ce,oe,Oe,re,ae,le,se]})}return i})();function Yt(i,c){if(i&1&&(o(0,"div",6)(1,"p",7),l(2),r()()),i&2){let e=m();a(2),h(e.actionMessage)}}function Kt(i,c){if(i&1&&(o(0,"div",8)(1,"p",7),l(2),r()()),i&2){let e=m();a(2),h(e.actionMessage)}}function Jt(i,c){if(i&1){let e=S();o(0,"button",11),g("click",function(){v(e);let t=m().$implicit,s=m();return _(s.borrowFavBike(t))}),l(1,"Borrow "),r()}}function Qt(i,c){i&1&&(o(0,"button",12),l(1,"Already Borrowed"),r())}function Xt(i,c){if(i&1&&(o(0,"tr")(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),f(8,Jt,2,0,"button",9)(9,Qt,2,0,"button",10),r()()),i&2){let e=c.$implicit;a(2),h(e.bikeName),a(2),h(e.ownerName),a(2),h(e.bikeTechIdentifier),a(2),p("ngIf",!e.borrowed),a(),p("ngIf",e.borrowed)}}var Je=(()=>{class i{bikeService;page=0;size=5;favoritesPageRes={};wrong="";actionMessage="";actionWitness=!1;constructor(e){this.bikeService=e}ngOnInit(){this.fetchFavorites()}fetchFavorites(){this.bikeService.readAllFavoritesOfThiUser({page:this.page,size:this.size}).subscribe({next:e=>{this.favoritesPageRes=e},error:e=>{this.wrong="Something went wrong",console.log(e)}})}borrowFavBike(e){this.bikeService.borrowBike({"bike-id":e.bikeId}).subscribe({next:n=>{this.actionMessage=`Bike ${e.bikeName} borrowed successfully`,this.actionWitness=!0,e.borrowed=!0,setTimeout(()=>{this.actionMessage=""},4e3)},error:()=>{this.actionMessage="Something went wrong..",this.actionWitness=!1,setTimeout(()=>{this.actionMessage=""},4e3)}})}static \u0275fac=function(n){return new(n||i)(y(M))};static \u0275cmp=C({type:i,selectors:[["app-favorites"]],decls:17,vars:3,consts:[[1,"text-primary"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"alert","alert-success"],[1,"m-0","p-0"],[1,"alert","alert-danger"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-secondary",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary"]],template:function(n,t){n&1&&(o(0,"h3",0),l(1,"My favorites bikes"),r(),f(2,Yt,3,1,"div",1)(3,Kt,3,1,"div",2),o(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),l(8,"Bike"),r(),o(9,"th",4),l(10,"Owner"),r(),o(11,"th",4),l(12,"Tech identifier"),r(),o(13,"th",4),l(14,"Status"),r()()(),o(15,"tbody"),f(16,Xt,10,5,"tr",5),r()()),n&2&&(a(2),p("ngIf",t.actionMessage&&t.actionWitness),a(),p("ngIf",t.actionMessage&&!t.actionWitness),a(13),p("ngForOf",t.favoritesPageRes.content))},dependencies:[I,w]})}return i})();function Zt(i,c){if(i&1&&(o(0,"div",21)(1,"p",22),l(2),r()()),i&2){let e=m();a(2),h(e.actionMessage)}}function ei(i,c){if(i&1&&(o(0,"div",23)(1,"p",22),l(2),r()()),i&2){let e=m();a(2),h(e.actionMessage)}}function ti(i,c){if(i&1&&x(0,"img",24),i&2){let e=m();p("src","data:image/jpg;base64, "+e.bike.picture,q)}}function ii(i,c){i&1&&(o(0,"div",25),x(1,"img",26),o(2,"h4",27),l(3," Under reparations for the moment... "),r()())}function ni(i,c){if(i&1){let e=S();o(0,"button",30),g("click",function(){v(e);let t=m(2);return _(t.addToFavorite())}),l(1," Add to favorites "),r()}}function oi(i,c){if(i&1){let e=S();o(0,"div",25),f(1,ni,2,0,"button",28),o(2,"button",29),g("click",function(){v(e);let t=m();return _(t.borrowBike())}),l(3,"Borrow"),r()()}if(i&2){let e=m();a(),p("ngIf",!e.bike.favorite)}}function ri(i,c){i&1&&(o(0,"div",31),x(1,"img",32),o(2,"h4",27),l(3," Borrowed currently "),r()())}var Qe=(()=>{class i{bikeService;activatedRoute;bike={};bikeId=0;error="";actionMessage="";actionWitness=!1;constructor(e,n){this.bikeService=e,this.activatedRoute=n}ngOnInit(){this.bikeId=this.activatedRoute.snapshot.params.bikeId,console.log("The bike Id from the link"),this.fetchConcernedBike(this.bikeId)}fetchConcernedBike(e){this.bikeService.getBikeById({"bike-id":e}).subscribe({next:n=>{this.bike=n,console.log(this.bike)},error:n=>{this.error="Something went wrong",console.log(n)}})}borrowBike(){this.bikeService.borrowBike({"bike-id":this.bike.id}).subscribe({next:()=>{this.bike.borrowed=!0,this.actionMessage="Borrowed successfully",this.actionWitness=!0},error:()=>{this.actionMessage="Something went wrong..",this.actionWitness=!1}})}addToFavorite(){this.bikeService.addBikeToFavorites({"bike-id":this.bike.id}).subscribe({next:e=>{this.actionMessage=`${this.bike.bikeName} added to favorites..`,this.actionWitness=!0,this.bike.favorite=!0,setTimeout(()=>{this.actionMessage=""},4e3)},error:e=>{this.actionMessage="Something went wrong",this.actionWitness=!1,console.log(e),setTimeout(()=>{this.actionMessage=""},4e3)}})}static \u0275fac=function(n){return new(n||i)(y(M),y(ee))};static \u0275cmp=C({type:i,selectors:[["app-bike-details"]],decls:28,vars:11,consts:[["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card","mb-3",2,"width","1200px","margin","auto"],["class","card-img-top","alt","...","style","height: 500px",3,"src",4,"ngIf"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-title","text-danger","fw-bold","fs-3"],["src","/bicyclette.png",1,"md-icon"],[1,"text-dark"],[1,"d-flex","align-items-center","mt-4","mb-4"],[3,"rating"],[1,"d-flex"],[1,"card-title","text-warning","fw-bold","fs-4"],["src","/utilisateur.png",1,"md-icon"],[1,"card-text","fs-4","text-secondary"],["src","/description.png",1,"md-icon"],[1,"d-flex","align-items-center","gap-2"],["src","/identifiant.png",1,"md-icon"],[1,"fs-4"],["class","d-flex align-items-center gap-2 mt-4 mb-4",4,"ngIf"],["class","d-flex align-items-center gap-2 mt-4",4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"m-0","p-0"],["role","alert",1,"alert","alert-danger"],["alt","...",1,"card-img-top",2,"height","500px",3,"src"],[1,"d-flex","align-items-center","gap-2","mt-4","mb-4"],["src","/outils-de-reparation.png",1,"md-icon"],[1,"text","text-primary"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","align-items-center","gap-2","mt-4"],["src","/cocher.png",1,"icon"]],template:function(n,t){n&1&&(f(0,Zt,3,1,"div",0)(1,ei,3,1,"div",1),o(2,"div",2),f(3,ti,1,1,"img",3),o(4,"div",4)(5,"div",5)(6,"h5",6),x(7,"img",7),l(8," \xA0 "),o(9,"span",8),l(10,"Bike - "),r(),l(11),r(),o(12,"div",9),x(13,"app-rating",10),r()(),o(14,"div",11)(15,"h5",12),x(16,"img",13),l(17),r()(),o(18,"p",14),x(19,"img",15),l(20),r(),o(21,"div",16),x(22,"img",17),o(23,"h3",18),l(24),r()(),f(25,ii,4,0,"div",19)(26,oi,4,1,"div",19)(27,ri,4,0,"div",20),r()()),n&2&&(p("ngIf",t.actionMessage&&t.actionWitness),a(),p("ngIf",t.actionMessage&&!t.actionWitness),a(2),p("ngIf",t.bike.picture),a(8),B(" ",t.bike.bikeName," "),a(2),p("rating",t.bike.rating||0),a(4),B(" \xA0 ",t.bike.ownerName," "),a(3),B(" \xA0 ",t.bike.description," . "),a(4),h(t.bike.techIdentifier),a(),p("ngIf",t.bike.repairing),a(),p("ngIf",!t.bike.repairing&&!t.bike.borrowed),a(),p("ngIf",t.bike.borrowed))},dependencies:[w,L]})}return i})();var ai=[{path:"",component:We,children:[{path:"",component:ze,canActivate:[E]},{path:"mine",component:Ge,canActivate:[E]},{path:"unapproved",component:Ye,canActivate:[E]},{path:"borrowed",component:Ke,canActivate:[E]},{path:"bike-form",component:Ee,canActivate:[E]},{path:"bike-form-edit/:bikeId",component:Ee,canActivate:[E]},{path:"favorites",component:Je,canActivate:[E]},{path:"bike-details/:bikeId",component:Qe,canActivate:[E]}]}],Xe=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=G({type:i});static \u0275inj=z({imports:[Me.forChild(ai),Me]})}return i})();var zo=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=G({type:i});static \u0275inj=z({imports:[Ae,Xe,qe]})}return i})();export{zo as BikeModule};
